# next js

> react 프레임워크
>
> 다양한 도구들의 모음
>
> api가 꽤나 많다.
>
> 다 알진 못하지만 일반적인 기능은 모두 살펴보고 심화 기능들은 읽어라도 보자.

### hydration

> 페이지가 브라우저에 로드되고 자바스크립트 코드가 실행되면서 페이지가 인터렉티브하게 동작할 상태가 되는 과정

### pre-rendering

next js는 모든 페이지를 프리렌더링 한다.

- 자바스크립트를 diable하면 pre-rendering하는지 안되는지 알 수 있다.

  동작을 한다.

- html파일이 어느정도 로드가 되어있고 하이드레이션 과정을 통해 js로드 된후에 인터렉티브하게 동작할 상태가 된다.

- 검색엔진 최적화에도 큰 도움이 된다.

두가지

- state generation
  - 빌드타임에 pre rendering
- ssr
  - 필요할때 마다 server에서 렌더링해서 받아온다.



run dev 할때는 모든 페이지가 ssr로 작동한다. fast refresh를 위한 설정인것 같다.

서버 사이드 렌더링은 조금 느리다.

### fallback

default false

true =>

이미 렌더링 된 페이지 라면 바로 보여주고

렌더링 되지 않은 페이지라면 404가 뜨지만 useRouter().fallback을 이용해서 로딩하면서 로딩페이지를 보여주고 로딩 후에는 제대로 렌더링된 화면을 보여줄 수 있다.

 ### Pages

각 페이지들은 route 기반이 된다.

## data fetching

ssr ssg는 해보았고

isr도 유용하고 

csr는 swr을 이용해봐라

### image optimization

Image 컴포넌트를 쓰면 알아서 최적화를 해준다.



## NEXT js의 실제

### 실제로 배포를 하기전에 고려해야할 부분

1. 캐싱이 가능한 곳에서는 캐싱을 해라.
2. 데이터 베이스나 백엔드를 한 지역에 배포되어야 한다.
3. 최소한의 자바스크립트 번들을 이요해라 즉, 자바스크립트 번들을 최대한 줄여라
4. 큰 자바스크립트 번들은 필요할 때까지는 로깅하기 마라
5. 로깅을 셋업 해놔라
6. 에러 핸들링을 잘해놓아라
7. 퍼포먼스 측정 도구를 만들어 놓아라
8. `Righthouse`를 통해 성능 측정을 해라.

### deployment

preview 기능: 다른 브랜치에 푸시한 후 preview기능을 통해 바뀐 페이지를 미리 경험 해보기가 가능하다. (매우 유용할듯?)

### Authentication

ssg -> csr : 

ssr :

### AMP

빠른 성능의 모바일 페이지구현을 목적으로한다.

가속화된 모바일 페이지이다.

자바스크립트를 모두 비동기로 실행하고

모든 리소스를 static하게 만들고

렌더링을 막는 것을 허용하지 않는다.

css무조건 inline 

애니메이션은 무조건 gpu

우선순위를 잘 정해라.
